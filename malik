<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DriveShare Hub</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f0f1a 0%, #1a1a2e 50%, #16213e 100%);
            min-height: 100vh;
            color: #fff;
        }

        /* Header */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
            background: rgba(13, 17, 23, 0.95);
            border-bottom: 1px solid #30363d;
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .logo h1 {
            font-size: 1.5rem;
            background: linear-gradient(90deg, #4285f4, #34a853, #fbbc05, #ea4335);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .drive-icon {
            width: 36px;
            height: 36px;
        }

        .auth-section {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .btn {
            padding: 0.6rem 1.2rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .btn-primary {
            background: linear-gradient(135deg, #4285f4, #34a853);
            color: #fff;
            box-shadow: 0 4px 15px rgba(66, 133, 244, 0.3);
        }

        .btn-primary:hover {
            box-shadow: 0 6px 20px rgba(66, 133, 244, 0.5);
        }

        .btn-danger {
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: #fff;
        }

        .btn-success {
            background: linear-gradient(135deg, #34a853, #2d8f47);
            color: #fff;
        }

        .admin-badge {
            background: rgba(34, 197, 94, 0.15);
            color: #22c55e;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
            border: 1px solid rgba(34, 197, 94, 0.3);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .admin-badge::before {
            content: '‚úì';
            font-weight: bold;
        }

        .hidden {
            display: none !important;
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .modal {
            background: linear-gradient(180deg, #2d3748 0%, #1a202c 100%);
            padding: 2rem;
            border-radius: 16px;
            width: 90%;
            max-width: 420px;
            position: relative;
            border: 1px solid #404040;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-20px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal h2 {
            margin-bottom: 0.5rem;
            text-align: center;
            font-size: 1.5rem;
        }

        .modal p {
            text-align: center;
            color: #9ca3af;
            margin-bottom: 1.5rem;
            font-size: 0.95rem;
        }

        .modal input {
            width: 100%;
            padding: 0.9rem 1rem;
            margin-bottom: 1rem;
            border: 2px solid #404040;
            border-radius: 10px;
            background: #1f2937;
            color: #fff;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .modal input:focus {
            outline: none;
            border-color: #4285f4;
        }

        .modal .btn {
            width: 100%;
            padding: 0.9rem;
            font-size: 1rem;
        }

        .close-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-size: 1.5rem;
            cursor: pointer;
            color: #9ca3af;
            background: none;
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .close-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
        }

        .error-msg {
            color: #ef4444;
            text-align: center;
            margin-top: 0.75rem;
            font-size: 0.9rem;
            padding: 0.5rem;
            background: rgba(239, 68, 68, 0.1);
            border-radius: 6px;
        }

        /* Main Content */
        main {
            max-width: 900px;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        .card {
            background: linear-gradient(180deg, #2d3748 0%, #1a202c 100%);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            border: 1px solid #404040;
        }

        .card h2 {
            margin-bottom: 1.25rem;
            font-size: 1.25rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Upload Section */
        .upload-form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .upload-form input {
            padding: 0.9rem 1rem;
            border: 2px solid #404040;
            border-radius: 10px;
            background: #1f2937;
            color: #fff;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .upload-form input:focus {
            outline: none;
            border-color: #4285f4;
        }

        .upload-form input::placeholder {
            color: #6b7280;
        }

        /* Files List */
        .files-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .file-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.25rem;
            background: #1f2937;
            border-radius: 12px;
            transition: all 0.2s ease;
            border: 1px solid transparent;
        }

        .file-item:hover {
            background: #374151;
            border-color: #4b5563;
            transform: translateX(4px);
        }

        .file-info {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex: 1;
            min-width: 0;
        }

        .file-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, #4285f4, #34a853);
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .file-details {
            min-width: 0;
        }

        .file-details h3 {
            font-size: 1rem;
            margin-bottom: 0.25rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .file-details p {
            font-size: 0.8rem;
            color: #9ca3af;
        }

        .file-actions {
            display: flex;
            gap: 0.5rem;
            flex-shrink: 0;
        }

        .file-actions .btn {
            padding: 0.5rem 1rem;
            font-size: 0.85rem;
        }

        .empty-state {
            text-align: center;
            padding: 3rem;
            color: #9ca3af;
        }

        .empty-state .icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        /* Auth Required Section */
        .auth-required {
            text-align: center;
            padding: 4rem 2rem;
        }

        .lock-icon {
            font-size: 5rem;
            margin-bottom: 1.5rem;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.8; }
        }

        .auth-required h2 {
            margin-bottom: 0.75rem;
            font-size: 1.75rem;
        }

        .auth-required p {
            color: #9ca3af;
            margin-bottom: 2rem;
            font-size: 1.1rem;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 2rem;
            color: #6b7280;
            font-size: 0.9rem;
            border-top: 1px solid #2d3748;
            margin-top: 2rem;
        }

        footer a {
            color: #4285f4;
            text-decoration: none;
        }

        footer a:hover {
            text-decoration: underline;
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            padding: 1rem 1.5rem;
            background: #22c55e;
            color: #fff;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            animation: slideIn 0.3s ease, slideOut 0.3s ease 2.7s;
            z-index: 2000;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }

        /* Responsive */
        @media (max-width: 600px) {
            header {
                flex-direction: column;
                gap: 1rem;
                padding: 1rem;
            }

            .auth-section {
                width: 100%;
                justify-content: center;
                flex-wrap: wrap;
            }

            .file-item {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }

            .file-info {
                flex-direction: column;
            }

            .file-actions {
                width: 100%;
                justify-content: center;
            }

            .file-details h3 {
                white-space: normal;
            }
        }

        /* Config Panel */
        .config-panel {
            background: linear-gradient(135deg, #1e3a5f 0%, #1a202c 100%);
            border: 2px solid #4285f4;
            margin-bottom: 1.5rem;
        }

        .config-panel h2 {
            color: #4285f4;
        }

        .config-form {
            display: grid;
            gap: 1rem;
        }

        .config-form label {
            font-size: 0.9rem;
            color: #9ca3af;
            margin-bottom: 0.25rem;
            display: block;
        }

        .config-form input {
            padding: 0.75rem 1rem;
            border: 2px solid #404040;
            border-radius: 8px;
            background: #1f2937;
            color: #fff;
            font-size: 0.95rem;
            width: 100%;
        }

        .config-form input:focus {
            outline: none;
            border-color: #4285f4;
        }

        .config-note {
            font-size: 0.8rem;
            color: #f59e0b;
            margin-top: 1rem;
            padding: 0.75rem;
            background: rgba(245, 158, 11, 0.1);
            border-radius: 8px;
            border-left: 3px solid #f59e0b;
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <svg class="drive-icon" viewBox="0 0 87.3 78" xmlns="http://www.w3.org/2000/svg">
                <path d="m6.6 66.85 3.85 6.65c.8 1.4 1.95 2.5 3.3 3.3l13.75-23.8h-27.5c0 1.55.4 3.1 1.2 4.5z" fill="#0066da"/>
                <path d="m43.65 25-13.75-23.8c-1.35.8-2.5 1.9-3.3 3.3l-25.4 44a9.06 9.06 0 0 0 -1.2 4.5h27.5z" fill="#00ac47"/>
                <path d="m73.55 76.8c1.35-.8 2.5-1.9 3.3-3.3l1.6-2.75 7.65-13.25c.8-1.4 1.2-2.95 1.2-4.5h-27.502l5.852 11.5z" fill="#ea4335"/>
                <path d="m43.65 25 13.75-23.8c-1.35-.8-2.9-1.2-4.5-1.2h-18.5c-1.6 0-3.15.45-4.5 1.2z" fill="#00832d"/>
                <path d="m59.8 53h-32.3l-13.75 23.8c1.35.8 2.9 1.2 4.5 1.2h50.8c1.6 0 3.15-.45 4.5-1.2z" fill="#2684fc"/>
                <path d="m73.4 26.5-12.7-22c-.8-1.4-1.95-2.5-3.3-3.3l-13.75 23.8 16.15 28h27.45c0-1.55-.4-3.1-1.2-4.5z" fill="#ffba00"/>
            </svg>
            <h1>DriveShare Hub</h1>
        </div>
        <div class="auth-section">
            <button id="adminLoginBtn" class="btn btn-primary">üîê Admin Login</button>
            <span id="adminBadge" class="admin-badge hidden">Admin Mode</span>
            <button id="logoutBtn" class="btn btn-danger hidden">Logout</button>
        </div>
    </header>

    <!-- Admin Login Modal -->
    <div id="loginModal" class="modal-overlay hidden">
        <div class="modal">
            <button class="close-btn" onclick="closeModal('loginModal')">√ó</button>
            <h2>üîê Admin Login</h2>
            <p>Enter your admin password to manage files</p>
            <input type="password" id="adminPassword" placeholder="Enter admin password">
            <button id="submitLogin" class="btn btn-primary">Login</button>
            <div id="loginError" class="error-msg hidden">Incorrect password. Please try again.</div>
        </div>
    </div>

    <!-- User Auth Modal -->
    <div id="userAuthModal" class="modal-overlay hidden">
        <div class="modal">
            <button class="close-btn" onclick="closeModal('userAuthModal')">√ó</button>
            <h2>üîë Access Required</h2>
            <p>Enter the access code to view shared files</p>
            <input type="password" id="accessCode" placeholder="Enter access code">
            <button id="submitAccess" class="btn btn-primary">Access Files</button>
            <div id="accessError" class="error-msg hidden">Incorrect access code. Please try again.</div>
        </div>
    </div>

    <main>
        <!-- Configuration Panel (Admin Only - First Time Setup) -->
        <section id="configSection" class="card config-panel hidden">
            <h2>‚öôÔ∏è Configuration Settings</h2>
            <div class="config-form">
                <div>
                    <label for="newAdminPass">Admin Password:</label>
                    <input type="password" id="newAdminPass" placeholder="Set admin password">
                </div>
                <div>
                    <label for="newAccessCode">Viewer Access Code:</label>
                    <input type="password" id="newAccessCode" placeholder="Set access code for viewers">
                </div>
                <button id="saveConfigBtn" class="btn btn-success">üíæ Save Configuration</button>
            </div>
            <div class="config-note">
                ‚ö†Ô∏è These passwords are stored in your browser. For GitHub Pages deployment, you may want to hardcode them in the script section below.
            </div>
        </section>

        <!-- Upload Section (Admin Only) -->
        <section id="uploadSection" class="card hidden">
            <h2>üì§ Upload New Link</h2>
            <div class="upload-form">
                <input type="text" id="fileTitle" placeholder="Enter file name (e.g., Project Report.pdf)">
                <input type="url" id="driveLink" placeholder="Paste Google Drive sharing link here">
                <button id="uploadBtn" class="btn btn-primary">‚ûï Add Link</button>
            </div>
        </section>

        <!-- Files List -->
        <section id="filesSection" class="card hidden">
            <h2>üìÅ Shared Files</h2>
            <div id="filesList" class="files-list">
                <!-- Files will be dynamically added here -->
            </div>
        </section>

        <!-- Auth Required Message -->
        <section id="authRequired" class="card auth-required">
            <div class="lock-icon">üîí</div>
            <h2>Authentication Required</h2>
            <p>Please enter the access code to view shared files</p>
            <button id="enterCodeBtn" class="btn btn-primary">üîë Enter Access Code</button>
        </section>
    </main>

    <footer>
        <p>DriveShare Hub ‚Äî Securely share your Google Drive files</p>
        <p style="margin-top: 0.5rem;">Made for GitHub Pages deployment</p>
    </footer>

    <script>
        // =====================================================
        // CONFIGURATION - CHANGE THESE VALUES FOR YOUR DEPLOYMENT
        // =====================================================
        const DEFAULT_CONFIG = {
            adminPassword: 'admin123',      // CHANGE THIS to your admin password
            accessCode: 'viewer456'         // CHANGE THIS to your viewer access code
        };
        // =====================================================

        // State Management
        let state = {
            isAdmin: false,
            isAuthenticated: false,
            config: null,
            files: []
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadState();
            setupEventListeners();
            updateUI();
        });

        function loadState() {
            // Load config (use defaults if not set)
            const savedConfig = localStorage.getItem('driveShareConfig');
            if (savedConfig) {
                state.config = JSON.parse(savedConfig);
            } else {
                state.config = { ...DEFAULT_CONFIG };
                localStorage.setItem('driveShareConfig', JSON.stringify(state.config));
            }

            // Load files
            const savedFiles = localStorage.getItem('driveShareFiles');
            if (savedFiles) {
                state.files = JSON.parse(savedFiles);
            }

            // Check session
            state.isAdmin = sessionStorage.getItem('driveShareAdmin') === 'true';
            state.isAuthenticated = sessionStorage.getItem('driveShareAuth') === 'true';
        }

        function saveFiles() {
            localStorage.setItem('driveShareFiles', JSON.stringify(state.files));
        }

        function saveConfig() {
            localStorage.setItem('driveShareConfig', JSON.stringify(state.config));
        }

        function setupEventListeners() {
            // Admin login button
            document.getElementById('adminLoginBtn').addEventListener('click', function() {
                openModal('loginModal');
            });

            // Submit admin login
            document.getElementById('submitLogin').addEventListener('click', handleAdminLogin);
            document.getElementById('adminPassword').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') handleAdminLogin();
            });

            // Enter code button
            document.getElementById('enterCodeBtn').addEventListener('click', function() {
                openModal('userAuthModal');
            });

            // Submit access code
            document.getElementById('submitAccess').addEventListener('click', handleUserAuth);
            document.getElementById('accessCode').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') handleUserAuth();
            });

            // Logout
            document.getElementById('logoutBtn').addEventListener('click', handleLogout);

            // Upload
            document.getElementById('uploadBtn').addEventListener('click', handleUpload);

            // Save config
            document.getElementById('saveConfigBtn').addEventListener('click', handleSaveConfig);

            // Close modals on overlay click
            document.querySelectorAll('.modal-overlay').forEach(function(overlay) {
                overlay.addEventListener('click', function(e) {
                    if (e.target === overlay) {
                        overlay.classList.add('hidden');
                    }
                });
            });
        }

        function openModal(id) {
            document.getElementById(id).classList.remove('hidden');
            // Focus on input
            const input = document.getElementById(id).querySelector('input');
            if (input) setTimeout(function() { input.focus(); }, 100);
        }

        function closeModal(id) {
            document.getElementById(id).classList.add('hidden');
            // Clear inputs and errors
            const modal = document.getElementById(id);
            modal.querySelectorAll('input').forEach(function(input) { input.value = ''; });
            modal.querySelectorAll('.error-msg').forEach(function(err) { err.classList.add('hidden'); });
        }

        function handleAdminLogin() {
            const password = document.getElementById('adminPassword').value;
            const errorEl = document.getElementById('loginError');

            if (password === state.config.adminPassword) {
                state.isAdmin = true;
                state.isAuthenticated = true;
                sessionStorage.setItem('driveShareAdmin', 'true');
                sessionStorage.setItem('driveShareAuth', 'true');
                closeModal('loginModal');
                updateUI();
                showToast('Welcome, Admin!');
            } else {
                errorEl.classList.remove('hidden');
                document.getElementById('adminPassword').value = '';
            }
        }

        function handleUserAuth() {
            const code = document.getElementById('accessCode').value;
            const errorEl = document.getElementById('accessError');

            if (code === state.config.accessCode) {
                state.isAuthenticated = true;
                sessionStorage.setItem('driveShareAuth', 'true');
                closeModal('userAuthModal');
                updateUI();
                showToast('Access granted!');
            } else {
                errorEl.classList.remove('hidden');
                document.getElementById('accessCode').value = '';
            }
        }

        function handleLogout() {
            state.isAdmin = false;
            state.isAuthenticated = false;
            sessionStorage.removeItem('driveShareAdmin');
            sessionStorage.removeItem('driveShareAuth');
            updateUI();
            showToast('Logged out successfully');
        }

        function handleUpload() {
            const title = document.getElementById('fileTitle').value.trim();
            const link = document.getElementById('driveLink').value.trim();

            if (!title) {
                showToast('Please enter a file name', 'error');
                return;
            }

            if (!link) {
                showToast('Please enter a Google Drive link', 'error');
                return;
            }

            if (!isValidDriveLink(link)) {
                showToast('Please enter a valid Google Drive link', 'error');
                return;
            }

            const newFile = {
                id: Date.now(),
                title: title,
                link: convertToDirectLink(link),
                originalLink: link,
                date: new Date().toLocaleDateString('en-US', { 
                    year: 'numeric', 
                    month: 'short', 
                    day: 'numeric' 
                }),
                icon: getFileIcon(title)
            };

            state.files.unshift(newFile);
            saveFiles();

            document.getElementById('fileTitle').value = '';
            document.getElementById('driveLink').value = '';

            renderFiles();
            showToast('Link added successfully!');
        }

        function handleSaveConfig() {
            const newAdminPass = document.getElementById('newAdminPass').value.trim();
            const newAccessCode = document.getElementById('newAccessCode').value.trim();

            if (newAdminPass) {
                state.config.adminPassword = newAdminPass;
            }
            if (newAccessCode) {
                state.config.accessCode = newAccessCode;
            }

            saveConfig();
            document.getElementById('newAdminPass').value = '';
            document.getElementById('newAccessCode').value = '';
            showToast('Configuration saved!');
        }

        function isValidDriveLink(link) {
            return link.includes('drive.google.com') || 
                   link.includes('docs.google.com') ||
                   link.includes('sheets.google.com') ||
                   link.includes('slides.google.com');
        }

        function convertToDirectLink(link) {
            // Keep the original link for now - user should ensure sharing is enabled
            return link;
        }

        function getFileIcon(title) {
            const lower = title.toLowerCase();
            if (lower.endsWith('.pdf')) return 'üìÑ';
            if (lower.endsWith('.doc') || lower.endsWith('.docx')) return 'üìù';
            if (lower.endsWith('.xls') || lower.endsWith('.xlsx')) return 'üìä';
            if (lower.endsWith('.ppt') || lower.endsWith('.pptx')) return 'üìΩÔ∏è';
            if (lower.endsWith('.jpg') || lower.endsWith('.jpeg') || lower.endsWith('.png') || lower.endsWith('.gif')) return 'üñºÔ∏è';
            if (lower.endsWith('.mp4') || lower.endsWith('.mov') || lower.endsWith('.avi')) return 'üé¨';
            if (lower.endsWith('.mp3') || lower.endsWith('.wav')) return 'üéµ';
            if (lower.endsWith('.zip') || lower.endsWith('.rar') || lower.endsWith('.7z')) return 'üì¶';
            if (lower.endsWith('.txt')) return 'üìÉ';
            return 'üìÅ';
        }

        function deleteFile(id) {
            if (confirm('Are you sure you want to delete this file?')) {
                state.files = state.files.filter(function(f) { return f.id !== id; });
                saveFiles();
                renderFiles();
                showToast('File deleted');
            }
        }

        function renderFiles() {
            const container = document.getElementById('filesList');

            if (state.files.length === 0) {
                container.innerHTML = '<div class="empty-state"><div class="icon">üì≠</div><p>No files shared yet</p></div>';
                return;
            }

            let html = '';
            state.files.forEach(function(file) {
                html += '<div class="file-item">' +
                    '<div class="file-info">' +
                        '<div class="file-icon">' + file.icon + '</div>' +
                        '<div class="file-details">' +
                            '<h3>' + escapeHtml(file.title) + '</h3>' +
                            '<p>Shared on ' + file.date + '</p>' +
                        '</div>' +
                    '</div>' +
                    '<div class="file-actions">' +
                        '<a href="' + escapeHtml(file.link) + '" target="_blank" rel="noopener noreferrer" class="btn btn-success">Open</a>' +
                        (state.isAdmin ? '<button onclick="deleteFile(' + file.id + ')" class="btn btn-danger">Delete</button>' : '') +
                    '</div>' +
                '</div>';
            });

            container.innerHTML = html;
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function updateUI() {
            const adminLoginBtn = document.getElementById('adminLoginBtn');
            const adminBadge = document.getElementById('adminBadge');
            const logoutBtn = document.getElementById('logoutBtn');
            const configSection = document.getElementById('configSection');
            const uploadSection = document.getElementById('uploadSection');
            const filesSection = document.getElementById('filesSection');
            const authRequired = document.getElementById('authRequired');

            if (state.isAdmin) {
                adminLoginBtn.classList.add('hidden');
                adminBadge.classList.remove('hidden');
                logoutBtn.classList.remove('hidden');
                configSection.classList.remove('hidden');
                uploadSection.classList.remove('hidden');
                filesSection.classList.remove('hidden');
                authRequired.classList.add('hidden');
                renderFiles();
            } else if (state.isAuthenticated) {
                adminLoginBtn.classList.remove('hidden');
                adminBadge.classList.add('hidden');
                logoutBtn.classList.remove('hidden');
                configSection.classList.add('hidden');
                uploadSection.classList.add('hidden');
                filesSection.classList.remove('hidden');
                authRequired.classList.add('hidden');
                renderFiles();
            } else {
                adminLoginBtn.classList.remove('hidden');
                adminBadge.classList.add('hidden');
                logoutBtn.classList.add('hidden');
                configSection.classList.add('hidden');
                uploadSection.classList.add('hidden');
                filesSection.classList.add('hidden');
                authRequired.classList.remove('hidden');
            }
        }

        function showToast(message, type) {
            // Remove existing toast
            const existing = document.querySelector('.toast');
            if (existing) existing.remove();

            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            if (type === 'error') {
                toast.style.background = '#ef4444';
            }
            document.body.appendChild(toast);

            setTimeout(function() {
                toast.remove();
            }, 3000);
        }
    </script>
</body>
</html>
